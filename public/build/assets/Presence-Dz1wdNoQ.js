import{H as O,J as T,a0 as E,ai as b,aj as M,ak as S,c as g,al as C,g as p,i as N,n as $,E as j,d as U,t as x,a4 as k}from"./app-Uo57rSMT.js";import{r as _}from"./Primitive-BJTro_-K.js";import{k as F,g as D}from"./index-DdIUmQIu.js";import{b as L}from"./index-Cy2F0yIf.js";function G(t,e){const o=typeof t=="string"&&!e?`${t}Context`:e,a=Symbol(o);return[n=>{const r=O(a,n);if(r||r===null)return r;throw new Error(`Injection \`${a.toString()}\` not found. Component must be used within ${Array.isArray(t)?`one of the following components: ${t.join(", ")}`:`\`${t}\``}`)},n=>(T(a,n),n)]}function R(t){const e=E(),o=e?.type.emits,a={};return o?.length||console.warn(`No emitted event found. Please check component: ${e?.type.__name}`),o?.forEach(c=>{a[b(M(c))]=(...s)=>t(c,...s)}),a}function W(t){const e=E(),o=Object.keys(e?.type.props??{}).reduce((c,s)=>{const n=(e?.type.props[s]).default;return n!==void 0&&(c[s]=n),c},{}),a=S(t);return g(()=>{const c={},s=e?.vnode.props??{};return Object.keys(s).forEach(n=>{c[M(n)]=s[n]}),Object.keys({...o,...c}).reduce((n,r)=>(a.value[r]!==void 0&&(n[r]=a.value[r]),n),{})})}function Q(t,e){const o=W(t),a=e?R(e):{};return g(()=>({...o.value,...a}))}function X(t,e="reka"){return`${e}-${C?.()}`}function B(t,e){const o=p(t);function a(s){return e[o.value][s]??o.value}return{state:o,dispatch:s=>{o.value=a(s)}}}function H(t,e){const o=p({}),a=p("none"),c=p(t),s=t.value?"mounted":"unmounted";let n;const r=e.value?.ownerDocument.defaultView??F,{state:d,dispatch:l}=B(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),u=i=>{if(L){const m=new CustomEvent(i,{bubbles:!1,cancelable:!1});e.value?.dispatchEvent(m)}};N(t,async(i,m)=>{const y=m!==i;if(await $(),y){const A=a.value,f=h(e.value);i?(l("MOUNT"),u("enter"),f==="none"&&u("after-enter")):f==="none"||f==="undefined"||o.value?.display==="none"?(l("UNMOUNT"),u("leave"),u("after-leave")):m&&A!==f?(l("ANIMATION_OUT"),u("leave")):(l("UNMOUNT"),u("after-leave"))}},{immediate:!0});const v=i=>{const m=h(e.value),y=m.includes(i.animationName),A=d.value==="mounted"?"enter":"leave";if(i.target===e.value&&y&&(u(`after-${A}`),l("ANIMATION_END"),!c.value)){const f=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",n=r?.setTimeout(()=>{e.value?.style.animationFillMode==="forwards"&&(e.value.style.animationFillMode=f)})}i.target===e.value&&m==="none"&&l("ANIMATION_END")},w=i=>{i.target===e.value&&(a.value=h(e.value))},P=N(e,(i,m)=>{i?(o.value=getComputedStyle(i),i.addEventListener("animationstart",w),i.addEventListener("animationcancel",v),i.addEventListener("animationend",v)):(l("ANIMATION_END"),n!==void 0&&r?.clearTimeout(n),m?.removeEventListener("animationstart",w),m?.removeEventListener("animationcancel",v),m?.removeEventListener("animationend",v))},{immediate:!0}),I=N(d,()=>{const i=h(e.value);a.value=d.value==="mounted"?i:"none"});return j(()=>{P(),I()}),{isPresent:g(()=>["mounted","unmountSuspended"].includes(d.value))}}function h(t){return t&&getComputedStyle(t).animationName||"none"}var Z=U({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(t,{slots:e,expose:o}){const{present:a,forceMount:c}=x(t),s=p(),{isPresent:n}=H(a,s);o({present:n});let r=e.default({present:n.value});r=_(r||[]);const d=E();if(r&&r?.length>1){const l=d?.parent?.type.name?`<${d.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${l}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(u=>`  - ${u}`).join(`
`)].join(`
`))}return()=>c.value||a.value||n.value?k(e.default({present:n.value})[0],{ref:l=>{const u=D(l);return typeof u?.hasAttribute>"u"||(u?.hasAttribute("data-reka-popper-content-wrapper")?s.value=u.firstElementChild:s.value=u),u}}):null}});export{Z as P,Q as a,W as b,G as c,R as d,X as u};
